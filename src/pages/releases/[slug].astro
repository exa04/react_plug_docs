---
import StarlightPage from "@astrojs/starlight/components/StarlightPage.astro";
import { getCollection } from "astro:content";
// 1. Generate a new path for every collection entry
export async function getStaticPaths() {
    const notes = await getCollection("release-notes");
    return notes.map((entry) => ({
        params: { slug: entry.slug },
        props: { entry },
    }));
}
const { entry } = Astro.props;
const { Content } = await entry.render();

const releaseNotes = await getCollection("release-notes");
---

<style is:global>
    #starlight__sidebar {
        font-feature-settings: "tnum";
    }
</style>

<StarlightPage
    frontmatter={{
        title: entry.data.title,
        description: entry.data.description,
        prev: false,
        next: false,
        tableOfContents: false,
    }}
    sidebar={
        releaseNotes
            .sort((a, b) => Date.parse(b.data.date).valueOf() - Date.parse(a.data.date).valueOf())
            .map((releaseNote) => ({
                label: releaseNote.data.title,
                link: `/releases/${releaseNote.slug}`,
            }))
    }
>
    <Content>
</StarlightPage>
